<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Documentation</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="scripts/jquery-2.1.1.min.js"> </script>
    <script src="scripts/page.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,300,700,600,400' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <header class="header navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">
            Documentation
          </a>
          <div class="navbar-right">
            <div class="external-links">
              <i class="fa fa-github"></i>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="primary-content container-fluid">
      <div class="row-fluid">
          <div class="sidenav col-md-3">
            


<div class="module-list">
  <h3>Modules</h3>
  <ul class="module-listing">
  
    <li data-module-name="" class="collapsed collapsable module-item">
      <span class="collapsed-status">
        <i class="expand fa fa-plus-square-o"></i>
        <i class="collapse fa fa-minus-square-o"></i>
      </span>

      
      <ul class="thing-list">
        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.Checkbox.html">Checkbox</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.Map.html">Map</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addButton">addButton</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addClusteredPoints">addClusteredPoints</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addControl">addControl</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addLayer">addLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addMarker">addMarker</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addWmsLayer">addWmsLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearBoundLimits">clearBoundLimits</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearLayers">clearLayers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearMarkers">clearMarkers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.countFeatures">countFeatures</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.finishLoading">finishLoading</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.fitBounds">fitBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.fitToBoundsOf">fitToBoundsOf</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getAllMarkers">getAllMarkers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getBounds">getBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getCentre">getCentre</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getGeoJSON">getGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMapId">getMapId</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMapImpl">getMapImpl</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMarkerLocations">getMarkerLocations</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.markMyLocation">markMyLocation</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.notifyAll">notifyAll</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.redraw">redraw</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.registerListener">registerListener</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.removeLayer">removeLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.removeListener">removeListener</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.resetMap">resetMap</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.setGeoJSON">setGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.setMaxBounds">setMaxBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.startLoading">startLoading</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.subscribe">subscribe</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.unsubscribe">unsubscribe</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.MapConstants.html">MapConstants</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.MapUtils.html">MapUtils</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.bboxToPointArray">bboxToPointArray</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.calculateAreaKmSq">calculateAreaKmSq</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.createIcon">createIcon</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.createMarker">createMarker</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.getGeometryWithCirclesFromGeoJSON">getGeometryWithCirclesFromGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.getStandardGeoJSONForCircleGeometry">getStandardGeoJSONForCircleGeometry</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.wrapGeometryInGeoJSONFeatureCol">wrapGeometryInGeoJSONFeatureCol</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.Slider.html">Slider</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.TileLayer.SmartWMS.html">SmartWMS</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.TwoStepSelector.html">TwoStepSelector</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        
      </ul>
    </li>
  
  </ul>
</div>

          </div>

          <div class="col-md-9">
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Extension to the standard Leaflet WMS layer to add the ability for the layer class to lookup the bounding box
 * from the WMS server, and to construct a polygon geoJSON object, with the pid of the layer in the properties object.
 *
 * For this to work, the options object passed to the initialise method must include a property called wmsFeatureUrl,
 * which contains the FULL url to lookup the features of the associated pid.
 *
 * @class
 *
 */
L.TileLayer.SmartWMS = L.TileLayer.WMS.extend({

    _latLngbounds: null,
    _lngLatbounds: null,
    _wmsFeatureUrl: null,
    _callback: null,
    _pid: null,
    _properties: {},
    _map: null,

    initialize: function(url, options) {
        this._wmsFeatureUrl = options.wmsFeatureUrl;
        this._callback = options.callback;
        this._pid = options.pid;

        L.TileLayer.WMS.prototype.initialize.call(this, url, options);
    },

    retrieveLayer: function() {
        var self = this;

        $.ajax({
            url: this._wmsFeatureUrl,
            dataType: "json"
        }).done(function(data) {
            if (data) {
                self._lngLatBounds = ALA.MapUtils.bboxToPointArray(data.bbox, false);
                self._latLngBounds = ALA.MapUtils.bboxToPointArray(data.bbox, true);
                self._properties = data;

                self.getBounds = function () {
                    return new L.LatLngBounds(self._latLngBounds);
                };
                self.toGeoJSON = function () {
                    return {
                        type: "Feature",
                        properties: self._properties,
                        geometry: {
                            type: "Polygon",
                            coordinates: [self._lngLatBounds]
                        }
                    };
                };

                self._callback();
            }
        });
    },

    onAdd: function (map) {
        var self = this;

        this._map = map;

        L.TileLayer.WMS.prototype.onAdd.call(this, map);

        self.retrieveLayer();
    },

    getBounds: function() {
        return self._latLngBounds ? new L.LatLngBounds(self._latLngBounds) : this._map ? this._map.getBounds() : undefined;
    }
});

/**
 * Construct a new smart WMS layer.
 *
 * @param url The WMS url for the layer
 * @param options The options to pass to the wms server. Must include a pid and wmsFeatureUrl.
 * @returns {L.TileLayer.SmartWMS} the new layer
 */
L.tileLayer.smartWms = function (url, options) {
    return new L.TileLayer.SmartWMS(url, options);
};</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
