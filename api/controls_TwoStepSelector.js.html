<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Documentation</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="scripts/jquery-2.1.1.min.js"> </script>
    <script src="scripts/page.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,300,700,600,400' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <header class="header navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">
            Documentation
          </a>
          <div class="navbar-right">
            <div class="external-links">
              <i class="fa fa-github"></i>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="primary-content container-fluid">
      <div class="row-fluid">
          <div class="sidenav col-md-3">
            


<div class="module-list">
  <h3>Modules</h3>
  <ul class="module-listing">
  
    <li data-module-name="" class="collapsed collapsable module-item">
      <span class="collapsed-status">
        <i class="expand fa fa-plus-square-o"></i>
        <i class="collapse fa fa-minus-square-o"></i>
      </span>

      
      <ul class="thing-list">
        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.Checkbox.html">Checkbox</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.Map.html">Map</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addButton">addButton</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addClusteredPoints">addClusteredPoints</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addControl">addControl</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addLayer">addLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addMarker">addMarker</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.addWmsLayer">addWmsLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearBoundLimits">clearBoundLimits</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearLayers">clearLayers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.clearMarkers">clearMarkers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.countFeatures">countFeatures</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.finishLoading">finishLoading</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.fitBounds">fitBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.fitToBoundsOf">fitToBoundsOf</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getAllMarkers">getAllMarkers</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getBounds">getBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getCentre">getCentre</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getGeoJSON">getGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMapId">getMapId</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMapImpl">getMapImpl</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.getMarkerLocations">getMarkerLocations</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.markMyLocation">markMyLocation</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.notifyAll">notifyAll</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.redraw">redraw</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.registerListener">registerListener</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.removeLayer">removeLayer</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.removeListener">removeListener</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.resetMap">resetMap</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.setGeoJSON">setGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.setMaxBounds">setMaxBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.startLoading">startLoading</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.subscribe">subscribe</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.Map.html#.unsubscribe">unsubscribe</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.MapConstants.html">MapConstants</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="ALA.MapUtils.html">MapUtils</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.bboxToPointArray">bboxToPointArray</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.calculateAreaKmSq">calculateAreaKmSq</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.createIcon">createIcon</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.createMarker">createMarker</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.getGeometryWithCirclesFromGeoJSON">getGeometryWithCirclesFromGeoJSON</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.getStandardGeoJSONForCircleGeometry">getStandardGeoJSONForCircleGeometry</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="ALA.MapUtils.html#.wrapGeometryInGeoJSONFeatureCol">wrapGeometryInGeoJSONFeatureCol</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.Slider.html">Slider</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.TileLayer.SmartWMS.html">SmartWMS</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="L.Control.TwoStepSelector.html">TwoStepSelector</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        
      </ul>
    </li>
  
  </ul>
</div>

          </div>

          <div class="col-md-9">
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Custom Leaflet control which will display two select boxes. Selecing an item in the first box will populate the second.
 * Selecting an item in the second box will update the map.
 *
 * &lt;p/>
 * &lt;b>Options:&lt;/b>
 * &lt;ul>
 *     &lt;li>&lt;code>id&lt;/code> Unique id for the control&lt;/li>
 *     &lt;li>&lt;code>position&lt;/code> The location on the map (using leaflet's standard control positions). Default: topleft&lt;/li>
 *     &lt;li>&lt;code>title&lt;/code> The tooltip for the button. Default: 'Select...'&lt;/li>
 *     &lt;li>&lt;code>firstStepItems&lt;/code> array of items (key/value) to be displayed in the first selector (alternatively, use firstStepItemLookup)&lt;/li>
 *     &lt;li>&lt;code>firstStepItemLookup&lt;/code> Function callback to retrieve the list of items to be displayed in the first selector. Takes a single parameter: a callback function that must be called with the array of key/value pairs to populate the first selector.&lt;/li>
 *     &lt;li>&lt;code>firstStepTitle&lt;/code> Tooltip for the first select box&lt;/li>
 *     &lt;li>&lt;code>firstStepPlaceholder&lt;/code> Placeholder text for the first (null) item in the first selector. Default: 'Select one...'&lt;/li>
 *     &lt;li>&lt;code>secondStepItemLookup&lt;/code> Function callback to populate the second selector when the first selector is set. Takes 2 parameters: the key of the selected value from the first selector, and a callback function that must be called with the array of key/value pairs to populate the second selector.&lt;/li>
 *     &lt;li>&lt;code>secondStepPlaceholder&lt;/code> Placeholder text for the first (null) item in the second selector. Default: 'Select one...'&lt;/li>
 *     &lt;li>&lt;code>secondStepTitle&lt;/code> Tooltip for the second select box&lt;/li>
 *     &lt;li>&lt;code>selectionAction&lt;/code> Function callback to invoke when the second selector is set&lt;/li>
 *     &lt;li>&lt;code>firstStepValue&lt;/code> The initial value for the first selector&lt;/li>
 *     &lt;li>&lt;code>iconClass&lt;/code> The CSS class(es) for the button icon. Default: 'fa fa-globe'&lt;/li>
 * &lt;/ul>
 *
 * @class
 */
L.Control.TwoStepSelector = L.Control.extend({
    options: {
        id: "replaceMe",
        position: "topleft",
        title: "Select...",
        firstStepItems: [],
        firstStepItemLookup: null,
        firstStepTitle: null,
        firstStepPlaceholder: "Select one...",
        secondStepItemLookup: null,
        secondStepPlaceholder: "Select one...",
        secondStepTitle: null,
        selectionAction: null,
        firstStepValue: null, //
        iconClass: "fa fa-globe"
    },

    initialize: function (options) {
        L.setOptions(this, options)
    },

    onAdd: function (map) {
        var self = this;

        self.map = map;

        self.id = self.options.id;
        var className = "two-step-selector leaflet-bar leaflet-control";
        var container = L.DomUtil.create("div", className);
        container.id = self.options.id;

        var icon = L.DomUtil.create("button", self.options.iconClass + " leaflet-bar-part", container);
        icon.title = self.options.title;

        var selectContainer = L.DomUtil.create("div", "selectors hide", container);
        self.step1 = L.DomUtil.create("select", "selector selector-one", selectContainer);
        self.step1.title = self.options.firstStepTitle || self.options.firstStepPlaceholder;
        if (self.options.firstStepPlaceholder) {
            var step1Placeholder = L.DomUtil.create("option", "", self.step1);
            step1Placeholder.value = null;
            step1Placeholder.innerHTML = self.options.firstStepPlaceholder;
        }

        if (self.options.firstStepItems &amp;&amp; self.options.firstStepItems.length > 0) {
            self.options.firstStepItems.forEach(function (item) {
                var option = L.DomUtil.create("option", "", self.step1);
                option.value = item.key;
                option.innerHTML = item.value;
            });
        } else if (self.options.firstStepItemLookup) {
            self.options.firstStepItemLookup(function (keyValuePairs) {
                self.populateStep1(self, keyValuePairs)
            });
        }

        self.step2 = L.DomUtil.create("select", "selector selector-two", selectContainer);
        self.step2.disabled = true;
        self.step2.title = self.options.secondStepTitle || self.options.secondStepPlaceholder;
        if (self.options.secondStepPlaceholder) {
            var step2Placeholder = L.DomUtil.create("option", "", self.step2);
            step2Placeholder.value = null;
            step2Placeholder.innerHTML = self.options.secondStepPlaceholder;
        }

        L.DomEvent.addListener(icon, 'click', function (e) {
            e.preventDefault();
            $("#" + self.id + " .selectors").toggleClass("hide inline-block")
        });

        L.DomEvent.addListener(self.step1, "change", function () {
            self.step1Changed(self)
        }, self);
        L.DomEvent.addListener(self.step2, "change", function () {
            self.step2Changed(self)
        }, self);

        L.DomEvent.disableClickPropagation(container);

        return container;
    },

    populateStep1: function (self, keyValuePairs) {
        keyValuePairs.forEach(function (item) {
            var option = L.DomUtil.create("option", "", self.step1);
            option.value = item.key;
            option.innerHTML = item.value;
        });
    },

    step1Changed: function (self) {
        var step1Selection = $("#" + this.options.id + " .selector-one").val();
        $("#" + this.options.id + " .selector-two").empty();
        self.step2.disabled = true;
        if (self.options.secondStepPlaceholder) {
            var step2Placeholder = L.DomUtil.create("option", "", self.step2);
            step2Placeholder.value = null;
            step2Placeholder.innerHTML = self.options.secondStepPlaceholder;
        }
        this.options.secondStepItemLookup(step1Selection, function (keyValuePairs) {
            self.populateStep2(self, keyValuePairs)
        });
    },

    populateStep2: function (self, keyValuePairs) {
        var step2 = self.step2;

        keyValuePairs.forEach(function (item) {
            var option = L.DomUtil.create("option", "", step2);
            option.value = item.key;
            option.innerHTML = item.value;
        });

        this.step2.removeAttribute("disabled");
    },

    step2Changed: function (self) {
        var step2Selection = $("#" + self.id + " .selector-two").val();
        self.options.selectionAction(step2Selection, self.map);
        $("#" + self.id + " .selectors").toggleClass("hide inline-block")
    }
});</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
